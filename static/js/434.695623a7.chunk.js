"use strict";(self.webpackChunkcuriculum=self.webpackChunkcuriculum||[]).push([[434],{8434:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var r=n(2982),i=n(5861),l=n(885),a=n(7757),s=n.n(a),c=n(2791),o=n(9271),u=n(200),d=n(7112),m=n(184),f=u.l.firestore(),p=function(e){var t=(0,c.useContext)(d.R),n=t.getPostById,a=t.data,p=(0,c.useState)(""),h=(0,l.Z)(p,2),v=h[0],x=h[1],j=(0,c.useState)(""),g=(0,l.Z)(j,2),b=g[0],y=g[1],w=(0,c.useState)(""),k=(0,l.Z)(w,2),C=k[0],N=k[1],S=(0,c.useState)(""),I=(0,l.Z)(S,2),Z=I[0],A=I[1],P=(0,c.useState)([""]),D=(0,l.Z)(P,2),F=D[0],R=D[1],O=(0,c.useState)(""),E=(0,l.Z)(O,2),L=E[0],T=E[1],B=(0,c.useState)((new Date).getTime()),U=(0,l.Z)(B,2),q=U[0],z=U[1],G=(0,c.useState)(0),J=(0,l.Z)(G,2),Q=J[0],H=J[1],K=(0,o.k6)();(0,c.useEffect)((function(){e.params.post&&n(e.params.post)}),[]),(0,c.useEffect)((function(){var e,t,n,r,i,l,s,c;a.hasOwnProperty("title")&&(x(null!==(e=a.title)&&void 0!==e?e:""),A(null!==(t=a.imagePreview)&&void 0!==t?t:""),R(null!==(n=a.imagesArray)&&void 0!==n?n:[""]),y(null!==(r=a.link)&&void 0!==r?r:""),N(null!==(i=a.description)&&void 0!==i?i:""),T(null!==(l=a.stack)&&void 0!==l?l:[]),z(null!==(s=a.id)&&void 0!==s?s:(new Date).getTime()),H(null!==(c=a.order)&&void 0!==c?c:0))}),[a]);var M=function(e){e&&e.preventDefault(),x(""),A(""),R([""]),N(""),T(""),y(""),H(0)},V=function(e){e.preventDefault();var t={title:v,description:C,imagesArray:F,imagePreview:Z,stack:L,id:q,order:+Q,link:b};t.title&&t.imagePreview&&(1!==t.imagesArray.length||""!==t.imagesArray[0])&&f.collection("All").doc("".concat(t.id)).set(t).then((function(){t.id&&K.push("/post/"+t.id),M()}))},W=function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,l,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=Array.from(t),l=[],a=u.l.storage().ref().child("posts"),c=Promise.all(r.map(function(){var e=(0,i.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.child(t.name),e.next=3,n.put(t);case 3:return e.t0=l,e.next=6,n.getDownloadURL();case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c.then((function(){"preview"===n?A(l[0]):"full"===n&&R((function(e){return""===e[0]&&e.shift(),e.concat(l)}))}))}catch(o){console.error(o)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(e,t,n){return e.preventDefault(),"delete"===t?(R((function(e){return e.splice(e.splice(e.indexOf(n),1))})),u.l.storage().refFromURL(n).delete(n)):"add"===t?R((function(e){return[].concat((0,r.Z)(e),[""])})):void R((function(e){return e.splice(e.splice(e.indexOf(n),1,t))}))};return(0,m.jsx)("div",{className:"create",children:(0,m.jsx)("div",{className:"wrap",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"block",children:(0,m.jsxs)("form",{onSubmit:function(e){return V(e)},children:[(0,m.jsx)("h2",{className:"title",children:"Create item"}),(0,m.jsx)("div",{className:"row",children:(0,m.jsxs)("div",{className:"col",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Item title"}),(0,m.jsx)("input",{type:"text",name:"title",value:v,placeholder:"Item title",onChange:function(e){return function(e){if(!e)return x("");var t=e[0].toUpperCase();t+=e.slice(1),x(t)}(e.target.value)},required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Item link"}),(0,m.jsx)("input",{type:"text",name:"link",value:b,placeholder:"Item link",onChange:function(e){return y(e.target.value)}})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Item description"}),(0,m.jsx)("textarea",{type:"text",cols:16,rows:6,name:"description",value:C,placeholder:"Item description",onChange:function(e){return N(e.target.value)}})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Preview Image"}),(0,m.jsxs)("div",{className:"oneliner",children:[(0,m.jsx)("input",{type:"text",name:"image",value:Z,placeholder:"Preview Image",onChange:function(e){return A(e.target.value)}}),(0,m.jsx)("label",{className:"btn-outline",htmlFor:"file",children:"Load preview image"}),(0,m.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",onChange:function(e){return W(e.target.files,"preview")}})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("hr",{}),(0,m.jsx)("label",{className:"btn-outline",htmlFor:"files",children:"Load full images"}),(0,m.jsx)("input",{style:{display:"none"},type:"file",id:"files",name:"files",multiple:!0,onChange:function(e){return W(e.target.files,"full")}}),F.map((function(e,t){return(0,m.jsxs)("div",{className:"oneliner",children:[(0,m.jsx)("input",{type:"text",name:"image",className:"img",placeholder:"Full Image",onChange:function(t){return X(t,t.target.value,e)},value:e},t),(0,m.jsx)("button",{onClick:function(t){return X(t,"delete",e)},children:"Delete"})]},t)})),(0,m.jsx)("button",{className:"btn btn-outline",onClick:function(e){return X(e,"add")},children:"+ image"})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Item Order"}),(0,m.jsx)("input",{type:"number",name:"order",value:+Q,placeholder:"Item order",onChange:function(e){return H(+e.target.value)}})]}),(0,m.jsx)("span",{style:{fontSize:"1.4em",color:"var(--sub)"},children:"Project tech stack"}),(0,m.jsx)("hr",{style:{marginBottom:0,borderColor:"var(--sub)"}}),(0,m.jsx)("div",{className:"technologies",children:["Responsive markup","SCSS","Flexbox","Grid layout","JS","React","jQuery","REST API","Bootstrap","Firebase"].map((function(e,t){return(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:e,children:e}),(0,m.jsx)("input",{id:e,name:e,type:"checkbox",onChange:function(t){return function(e,t){e.preventDefault();var n=(0,r.Z)(L);n.includes(t)?(n.splice(n.indexOf(t),1),T(n)):(n.push(t),T(n))}(t,e)},value:e,checked:!(null===L||void 0===L||!L.includes(e))})]},t)}))},L)]})}),(0,m.jsx)("button",{onClick:function(e){return M(e)},children:"reset"}),(0,m.jsx)("button",{className:"submit",type:"submit",onClick:function(e){return V(e)},children:"Submit"})]})}),(0,m.jsxs)("div",{className:"post block fadeIn",children:[(0,m.jsx)("span",{className:"name",children:v}),(0,m.jsx)("p",{className:"description",children:C}),(0,m.jsx)("picture",{className:"img-wrap",children:(0,m.jsx)("img",{src:Z,alt:Z})})]})]})})})}},2982:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(907);var i=n(181);function l(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=434.695623a7.chunk.js.map